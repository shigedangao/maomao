kind = "Kubernetes"
type = "Deployment"

[variables]
tag  = "v1.12.0"
port = "80"

[labels]
tier = "backend"
app  = "node"

[spec]
replicas = 1

    [spec.containers]
        
        [spec.containers.node]
        name = "node"
        image = "node:$tag"
        ports = [
            { name = "http", value = "$port" }
        ]
        
        [spec.containers.node.env]
            map = [
                # will make reference to a set of econfigmap / secrets
                "configmap::misc",
                "configmap::api",
                "secrets::foo"
            ]
            from = [
                # will make a reference to a set of secrets variables
                { kind = "secret", name = "google-api-key", from = "google::main.key" }
            ]
            raw = [
                # raw kubernetes env value
                { name = "greeting", value = "bar" }
            ]

        
        [spec.containers.node.probes]

            [probes.liveness]
                    kind = 'http'
                    path = 'foo'
                    port = 8080                
                    http_headers = [
                        { name = 'baz', value = 'wow' },
                        { name = 'yo', value = 'sabai' }
                    ]            
